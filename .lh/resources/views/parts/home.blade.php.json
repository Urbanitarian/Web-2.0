{
    "sourceFile": "resources/views/parts/home.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1683377254579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1683377254579,
            "name": "Commit-0",
            "content": "<section class=\"pt-8 mx-8 border-b\">\n    <div class=\"p-8 md:p-12 lg:px-12 lg:py-10\">\n        <div class=\"max-w-lg mx-auto text-center select-none lg:max-w-xl\">\n            <img class=\"flex justify-center w-12 mx-auto my-8\" src=\"./img/logo.png\">\n            <h2 class=\"text-2xl font-bold text-gray-900 md:text-3xl\">\n                The world's go to urban design online platform\n            </h2>\n\n            <p class=\"mt-4 text-base text-gray-500\">\n                The Ultimate Urban Design Knowledge Hub - Urbanitarian\n            </p>\n        </div>\n\n        <div class=\"max-w-2xl mx-auto mt-8\">\n\n            <div class=\"sm:flex-1\">\n                <input id=\"searchbar\" type=\"text\" placeholder=\"SEARCH\" name=\"q\" value=\"\"\n                    class=\"w-full p-3 text-gray-700 transition bg-gray-100 border-gray-200 rounded-md shadow-sm focus:border-white focus:outline-none focus:ring focus:ring-gray-400\" />\n            </div>\n\n        </div>\n\n</section>\n\n<div id=\"mysearch\" class=\"pt-4 pb-8 mx-2 bg-white md:mx-16\">\n\n <div class=\"flex flex-wrap justify-between py-4 mx-4 md:mx-0\">\n\n </div>\n\n    <div class=\"flex flex-wrap justify-between py-4 mx-4 md:mx-0\">\n        <div class=\"hidden pb-4 md:flex md:pb-0\">\n            <select name=\"popular\" id=\"pop_selector\"\n                class=\" px-4 h-[40px] text-sm bg-white border-gray-200 rounded-md  border focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                <option value=\"\">Popular</option>\n                <option value=\"new\">The Newest</option>\n                <option value=\"old\">The Oldest</option>\n            </select>\n        </div>\n\n        <fieldset class=\"flex flex-wrap gap-2 md:gap-4\" name=\"category\">\n            <button id=\"masterplans\" name=\"category\" value=\"Masterplans\">\n                <p id=\"masterbtn\" class=\"px-4 py-2 text-sm font-medium border rounded hover:bg-gray-200 active:bg-gray-300\">Masterplans <a id=\"masternum\" class=\"border-l border-gray-400 pl-2\"> &nbsp;{{ $masternum }}</a></p>\n            </button>\n            <button id=\"streetscapes\" name=\"category\" value=\"Streetscapes\">\n                <p id=\"streetbtn\" class=\"px-4 py-2 text-sm font-medium border rounded hover:bg-gray-200 active:bg-gray-300\">Streetscapes <a id=\"streetnum\" class=\"border-l border-gray-400 pl-2\"> &nbsp;{{ $streetnum }}</a></p>\n            </button>\n            <button id=\"urbanscapes\" name=\"category\" value=\"Neighbourhoods\">\n                <p id=\"urbanbtn\" class=\"px-4 py-2 text-sm font-medium border rounded hover:bg-gray-200 active:bg-gray-300\">Urbanscapes <a id=\"urbannum\" class=\"border-l border-gray-400 pl-2\"> &nbsp;{{ $urbannum }}</a></p>\n            </button>\n        </fieldset>\n\n        <div class=\"flex flex-col\">\n            <div class=\"py-4 md:flex md:py-0 md:mt-2 lg:mt-0\">\n                <span id=\"change-layout\" onclick=\"return false;\"> <i\n                        class=\"mx-2 text-gray-200 transition fa-solid fa-list fa-2x hover:text-gray-400\"></i></span>\n                <span id=\"change-layout3\" onclick=\"return false;\"> <i\n                        class=\"text-gray-200 transition fa-solid fa-map fa-2x hover:text-gray-400\"></i></span>\n            </div>\n\n        </div>\n\n    </div>\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js\"></script>\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css\" rel=\"stylesheet\" />\n\n    <div class=\"grid grid-cols-3 gap-2 mx-4 mt-4 md:grid-cols-5 md:mx-0\">\n        <div class=\"block\">\n            <label for=\"DeliveryStandard\" class=\"block\">\n                <p class=\"pb-2 font-bold text-black\">Tags</p>\n            </label>\n            <select name=\"tags\" id=\"tags_selector\" multiple=\"multiple\"\n                class=\"js-select2 w-full px-4 py-3 text-sm border rounded-md focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                {{-- <option value=\"\">All</option> --}}\n                <option value=\"Accessible and Connected\">Accessible and connected</option>\n                <option value=\"Affordable\">Affordable</option>\n                <option value=\"Age-friendly\">Age-friendly</option>\n                <option value=\"Biodiverse\">Biodiverse</option>\n                <option value=\"Business District\">Business District</option>\n                <option value=\"By the railway\">By the railway</option>\n                <option value=\"By the water\">By the water</option>\n                <option value=\"CBD\">CBD</option>\n                <option value=\"Car-free\">Car-free</option>\n                <option value=\"Carbon negative\">Carbon negative</option>\n                <option value=\"Circular\">Circular</option>\n                <option value=\"Climate adaptation\">Climate adaptation</option>\n                <option value=\"Climate-proof\">Climate-proof</option>\n                <option value=\"Climate-neutral\">Climate-neutral</option>\n                <option value=\"Child-friendly\">Child-friendly</option>\n                <option value=\"Co-Housing\">Co-housing</option>\n                <option value=\"Complete Street\">Complete Street</option>\n                <option value=\"Courtyards\">Courtyards</option>\n                <option value=\"DIY Urbanism\">DIY Urbanism</option>\n                <option value=\"Dense\">Dense</option>\n                <option value=\"Eco-village\">Eco-village</option>\n                <option value=\"Floating City\">Floating City</option>\n                <option value=\"Food-production\">Food-production</option>\n                <option value=\"Garden City\">Garden City</option>\n                <option value=\"Green\">Green</option>\n                <option value=\"Green wedges\">Green wedges</option>\n                <option value=\"Healthy\">Healthy</option>\n                <option value=\"High-rise\">High-rise </option>\n                <option value=\"Hi-Tech\">Hi-Tech</option>\n                <option value=\"Houses in row\">Houses in row</option>\n                <option value=\"Inclusive and Diverse\">Inclusive and Diverse</option>\n                <option value=\"Low-rise\">Low-rise</option>\n                <option value=\"Mixed-use\">Mixed-use</option>\n                <option value=\"Modular\">Modular</option>\n                <option value=\"Nature-rich\">Nature-rich</option>\n                <option value=\"Net zero\">Net zero</option>\n                <option value=\"Outdoor classroom\">Outdoor classroom</option>\n                <option value=\"Place-led\">Place-led</option>\n                <option value=\"Playful\">Playful</option>\n                <option value=\"Preventing Loneliness\">Preventing Loneliness</option>\n                <option value=\"Productive landscape\">Productive landscape</option>\n                <option value=\"Reachable\">Reachable</option>\n                <option value=\"Resilient landscape\">Resilient landscape</option>\n                <option value=\"Regeneration\">Regeneration</option>\n                <option value=\"Safe\">Safe</option>\n                <option value=\"Science Park\">Science Park</option>\n                <option value=\"Schoolyards\">Schoolyards</option>\n                <option value=\"Self-sufficient\">Self-sufficient</option>\n                <option value=\"Social Housing\">Social housing</option>\n                <option value=\"Solar Powered\">Solar Powered</option>\n                <option value=\"Timber\">Timber</option>\n                <option value=\"Transformation\">Transformation</option>\n                <option value=\"TOD\">TOD</option>\n                <option value=\"WSUD\">WSUD</option>\n                <option value=\"Youth-friendly\">Youth-friendly</option>\n                <option value=\"Zero carbon\">Zero carbon</option>\n            </select>\n        </div>\n\n        <div class=\"block\">\n            <label for=\"DeliveryStandard\" class=\"block\">\n                <p class=\"pb-2 font-bold text-black\">Size</p>\n            </label>\n            <select name=\"size\" id=\"size_selector\"\n                class=\"w-full px-4 py-3 text-sm border rounded-md focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                <option value=\"\">All</option>\n                <option value=\"XXXXL\">XXXXL</option>\n                <option value=\"XXXL\">XXXL</option>\n                <option value=\"XXL\">XXL</option>\n                <option value=\"XL\">XL</option>\n                <option value=\"L\">L</option>\n                <option value=\"M\">M</option>\n                <option value=\"S\">S</option>\n                <option value=\"XS\">XS</option>\n                <option value=\"XXS\">XXS</option>\n                <option value=\"XXXS\">XXXS</option>\n            </select>\n        </div>\n\n        <div class=\"block\">\n            <label for=\"DeliveryStandard\" class=\"block\">\n                <p class=\"pb-2 font-bold text-black\">Status</p>\n            </label>\n            <select name=\"status\" id=\"status_selector\"\n                class=\"w-full px-4 py-3 text-sm border rounded-md focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                <option value=\"\">All</option>\n                <option value=\"built\">Built</option>\n                <option value=\"future\">Future</option>\n                <option value=\"under_development\">Under\n                    development</option>\n                <option value=\"regeneration\">Regeneration</option>\n            </select>\n        </div>\n\n        <div class=\"block\">\n            <label for=\"DeliveryStandard\" class=\"block\">\n                <p class=\"pb-2 font-bold text-black\">City</p>\n            </label>\n            <select name=\"city\" id=\"city_selector\"\n                class=\"w-full px-4 py-3 text-sm border rounded-md focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                <option value=\"\">All</option>\n                @foreach ($cities->sortBy('name') as $city)\n                    <option value=\"{{ $city->name }}\">\n                        {{ $city->name }}</option>\n                @endforeach\n\n            </select>\n        </div>\n\n        <div class=\"block\">\n            <label for=\"DeliveryStandard\" class=\"block\">\n                <p class=\"pb-2 font-bold text-black\">Country</p>\n            </label>\n            <select name=\"country\" id=\"country_selector\"\n                class=\"w-full px-4 py-3 text-sm transition bg-white border rounded-md focus:border-white focus:outline-none focus:ring focus:ring-gray-400\">\n                <option value=\"\">All</option>\n                @foreach ($countries->sortBy('name') as $country)\n                    <option value=\"{{ $country->name }}\">\n                        {{ $country->name }}</option>\n                @endforeach\n\n            </select>\n        </div>\n\n    </div>\n</div>\n<div data-barba=\"container\">\n    <section class=\"block pb-8 mx-4 md:mx-16 tabset\">\n       <div class=\"mx-auto\">\n        <div id=\"boucle\" class=\"grid grid-cols-2 gap-5 mygrid lg:grid-cols-4 xl:grid-cols-5\">\n\n        </div>\n        </div>\n   <div class=\"flex pt-10\">\n            <button id=\"prev\" onclick=\"window.scrollTo(0, 400);\"\n                class=\"flex items-center justify-center px-3 py-2 mx-auto text-gray-900 border border-gray-300 rounded-md cursor-pointer hover:border-gray-300 hover:bg-gray-200 active:bg-gray-500 active:text-white peer-checked:text-white\">\n                <p class=\"text-sm font-medium\">previous</p>\n            </button>\n\n            <button id=\"next\" onclick=\"window.scrollTo(0, 400);\"\n                class=\"flex items-center justify-center px-3 py-2 mx-auto text-gray-900 border border-gray-300 rounded-md cursor-pointer hover:border-gray-300 hover:bg-gray-200 active:bg-gray-500 active:text-white peer-checked:text-white\">\n                <p class=\"text-sm font-medium\">Next</p>\n            </button>\n        </div>\n    </section>\n</div>\n<script src=\"https://unpkg.com/leaflet@1.9.1/dist/leaflet.js\"\n    integrity=\"sha256-NDI0K41gVbWqfkkaHj15IzU7PtMoelkzyKp8TOaFQ3s=\" crossorigin=\"\"></script>\n<script>\n    const itemsPerPage = 10;\n    let category = \"masterplans\";\n    let currentcategory = \"\";\n    let currenturl = \"\";\n    let view = \"grid\";\n    currentPage = 1;\n    let currentfilter = \"\";\n    let url = \"\";\n\n    $(document).ready(function() {\n        url = \"api/data?category=masterplans\";\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = \"none\";\n        fetchAndRenderData(url);\n        console.log(currenturl);\n    });\n\n\n    $(\"#next\").click(function() {\n        $('#boucle').empty();\n        currentPage++;\n        if (currentPage > totalPages) {\n            currentPage = totalPages;\n        }\n\n        fetchAndRenderData(url);\n    });\n\n    $(\"#prev\").click(function() {\n        $('#boucle').empty();\n        currentPage--;\n        if (currentPage < 1) {\n            currentPage = 1;\n        }\n\n        fetchAndRenderData(url);\n    });\n\n    const fetchAndRenderData = (url) => {\n      console.log(currenturl);\n        fetch(url)\n            .then((res) => res.json())\n            .then((out) => {\n               console.log(currentPage);\n                const obj = JSON.parse(JSON.stringify(out));\n                let textFromJSON = obj;\n                let num = textFromJSON.length;\n                totalPages = Math.ceil(textFromJSON.length / itemsPerPage);\n                const startIndex = (currentPage - 1) * itemsPerPage;\n                const endIndex = startIndex + itemsPerPage;\n                const itemsToDisplay = textFromJSON.slice(startIndex, endIndex);\n             if (currentPage == totalPages) {\n               $('#next').hide();\n                } else {\n               $('#next').show();\n                }\n             if (currentPage == 1) { \n               $('#prev').hide();\n                   } else {\n               $('#prev').show();\n                   }   \n                if (view == \"grid\") {\n                    $.each(itemsToDisplay, function(i, item) {\n                        if (item.category == \"Masterplans\") {\n                           btn1 = document.getElementById(\"masterbtn\");\n                           btn1.classList.add(\"bg-gray-200\");\n                           btn2 = document.getElementById(\"streetbtn\");\n                           btn2.classList.remove(\"bg-gray-200\");\n                           btn3 = document.getElementById(\"urbanbtn\");\n                           btn3.classList.remove(\"bg-gray-200\");\n                            let html = `\n                     <div class=\"relative overflow-hidden transition border shadow-md bg-gray-50 hover:bg-gray-100 saturate-120 animate__animated animate__backInLeft\">\n                        <a href=\"masterplans_post?id=${item.id}\" class=\"flex flex-col h-full duration-300 md:hover:scale-105\">\n                            <img alt=\"Art\" src=\"storage/uploads/thumbnails/masterplans/${item.image}\"alt=\"\"\n                                onerror=\"this.src='storage/uploads/masterplans/${item.image}'\" class=\"object-cover h-full  saturate-120 max-h-[480px]\" />\n                            <div class=\"\">\n                                <h3 class=\"mx-4 mt-2 text-sm font-bold text-center truncate\">\n                                    ${item.title} | ${item.author} | ${item.city}</h3>\n                                <p class=\"max-w-sm pb-2 mx-6 mt-1 mb-2 text-xs text-center text-gray-700 truncate\">\n                                      ${item.category} &nbsp;\n                                      ${item.tags.map(tag => `${tag}`).join(' &nbsp;')}\n                                </p>\n                            </div>\n                        </a>\n                    </div>\n                     `;\n                            $('#boucle').append(html);\n                        } else if (item.category == \"Urbanscapes\") {\n                            btn1 = document.getElementById(\"masterbtn\");\n                           btn1.classList.remove(\"bg-gray-200\");\n                           btn2 = document.getElementById(\"streetbtn\");\n                           btn2.classList.remove(\"bg-gray-200\");\n                           btn3 = document.getElementById(\"urbanbtn\");\n                           btn3.classList.add(\"bg-gray-200\");\n                            let html = `\n                     <div class=\"relative overflow-hidden transition border shadow-md bg-gray-50 hover:bg-gray-100 saturate-120 animate__animated animate__backInRight\">\n                        <a href=\"urbanscapes_post?id=${item.id}\" class=\"flex flex-col h-full duration-300 md:hover:scale-105\">\n                            <img alt=\"Art\" src=\"storage/uploads/thumbnails/urbanscapes/${item.imagea}\"alt=\"\"\n                                onerror=\"this.src='storage/uploads/urbanscapes/${item.imagea}'\" class=\"object-cover h-full  saturate-120 max-h-[480px]\" />\n                            <div class=\"\">\n                                <h3 class=\"mx-4 mt-2 text-sm font-bold text-center truncate\">\n                                    ${item.title} | ${item.author} | ${item.city}</h3>\n                                <p class=\"max-w-sm pb-2 mx-6 mt-1 mb-2 text-xs text-center text-gray-700 truncate\">\n                                      ${item.category} &nbsp;\n                                          ${item.tags.map(tag => `${tag}`).join(' &nbsp;')}\n                                </p>\n                            </div>\n                        </a>\n                    </div>\n                     `;\n                            $('#boucle').append(html);\n                        } else if (item.category == \"Streetscapes\") {\n                            btn1 = document.getElementById(\"masterbtn\");\n                           btn1.classList.remove(\"bg-gray-200\");\n                           btn2 = document.getElementById(\"streetbtn\");\n                           btn2.classList.add(\"bg-gray-200\");\n                           btn3 = document.getElementById(\"urbanbtn\");\n                           btn3.classList.remove(\"bg-gray-200\");\n                           thegrid = document.getElementById(\"boucle\");\n                           thegrid.classList.remove(\"xl:grid-cols-5\");\n                            let html = `\n                    <div\n                        class=\"relative col-span-3 md:col-span-2  overflow-hidden transition border shadow-md element1 bg-gray-50 hover:bg-gray-100 saturate-120 animate__animated animate__backInUp\">\n                        <a href=\"streetscapes_post?id=${item.id}\" class=\"flex flex-col h-full duration-300 md:hover:scale-105\">\n                            <img alt=\"Art\" src=\"storage/uploads/thumbnails/streetscapes/${item.imagea}\"alt=\"\"\n                                onerror=\"this.src='storage/uploads/streetscapes/${item.imagea}'\" class=\"object-cover h-full  saturate-120 max-h-[480px]\" />\n                            <div class=\"\">\n                                <h3 class=\"mt-4 font-bold text-center text-gray-900 uppercase \">\n                                    ${item.title} | ${item.author} | ${item.city}</h3>\n                                <p class=\"pb-2 mx-6 mt-1 mb-2 text-xs text-center text-gray-700 truncate \">\n                                    ${item.category} &nbsp;\n                                           ${item.tags.map(tag => `${tag}`).join(' &nbsp;')}\n                                </p>\n\n                            </div>\n                        </a>\n                    </div>`;\n                            $('#boucle').append(html);\n                        }\n                    })\n                } else {\n                    $(\".mygrid\").removeClass(\"lg:grid-cols-4\").removeClass(\"xl:grid-cols-5\").removeClass(\n                        \"grid-cols-3\").removeClass(\"grid-cols-2\").addClass(\"grid-cols-1\").addClass(\n                        \"lg:grid-cols-1\").addClass(\"xl:grid-cols-1\").removeClass(\"gap-5\");\n                    let html =\n                        `<section id='themap' class='flex w-full pb-16 mx-auto border-b'><div id='map2' class='mx-2 mt-4 rounded h-[650px] w-screen'></div></section>`;\n                    $('#boucle').append(html);\n\n                    fetch(url)\n                        .then((resa) => resa.json())\n                        .then((outa) => {\n                            const obja = JSON.parse(JSON.stringify(outa));\n                            let thedata = obja;\n\n                            amarkers = {};\n\n                            let mymap2 = L.map('map2').setView([48.6890, 11.14086], 2);\n                            theosmLayer = L.tileLayer(\n                                'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n                                    maxZoom: 19,\n                                    apikey: 'choisirgeoportail',\n                                    format: 'image/jpeg',\n                                    style: 'normal'\n                                }).addTo(mymap2);\n                            mymap2.addLayer(theosmLayer);\n                            mymap2.touchZoom.enable();\n                            mymap2.scrollWheelZoom.disable();\n\n                            let counter = 0;\n                            for (let i = 0; i < thedata.length; i++) {\n                                counter = counter + 1;\n                                mydata = thedata[i];\n                                mydatacat = mydata.category.toLowerCase();\n                                //mydatacat to lower case\n                                if (mydatacat == \"masterplans\") {\n                                    mypics = mydata.image;\n                                } else {\n                                    mypics = mydata.imagea;\n                                }\n                                category = mydata.category.toLowerCase();\n                                if (category == 'streetscapes') {\n                                    cat = 1;\n                                } else if (category == 'masterplans') {\n                                    cat = 2;\n                                } else if (category == 'urbanscapes') {\n                                    cat = 3;\n                                }\n\n                                mydataid = mydata.id;\n                                mydatacity = mydata.city;\n                                mydataname = mydata.title;\n                                mydataposition = mydata.location;\n                                var decimalStringa = [0, 0];\n                                if (mydataposition != null) {\n                                    decimalStringa = mydataposition.split(',');\n                                }\n                                decimalStringa[0] = parseFloat(decimalStringa[0]).toFixed(6);\n                                decimalStringa[1] = parseFloat(decimalStringa[1]).toFixed(6);\n\n                                markera = L.marker([decimalStringa[0], decimalStringa[1]], {}).addTo(mymap2)\n                                    .bindPopup(\n                                        '<div class=\"relative flex flex-col mappopup\"><img onclick=\"myfunction(' +\n                                        mydataid + ',' + cat +\n                                        ')\" class=\"mt-4\" src=\"/storage/uploads/' + mydatacat + '/' +\n                                        mypics +\n                                        '\" /><div class=\"flex justify-between\"><h1 class=\"mt-1 mb-2 font-bold clamp\" id=\"mydatanom\">' +\n                                        mydataname +\n                                        '</h1><h1 class=\"pb-4 mt-1 mb-2 text-xs text-gray-500\" id=\"mydatacity\">' +\n                                        mydatacity + '</h1></div></div>'\n                                    );\n                                amarkers[mydata.id] = markera;\n                            }\n\n                        })\n\n                }\n\n            })\n    };\n\n\n\n    $('#masterplans').click(function() {\n       //reset all selector to default values\n        $('#city_selector').val('');\n           $('#country_selector').val('');\n           $('#status_selector').val('');\n           $('#size_selector').val('');\n           $('#tags_selector').val('');\n        currentPage = 1;\n        resetLayout();\n        url = \"api/data?category=masterplans\";\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = \"masterplans\";\n        category = \"masterplans\";\n      \n        fetchAndRenderData(url);\n    });\n\n    $('#urbanscapes').click(function() {\n         $('#city_selector').val('');\n           $('#country_selector').val('');\n           $('#status_selector').val('');\n           $('#size_selector').val('');\n           $('#tags_selector').val('');\n        currentPage = 1;\n        resetLayout();\n        url = \"api/data?category=urbanscapes\";\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = \"urbanscapes\";\n        category = \"urbanscapes\";\n  \n        fetchAndRenderData(url);\n    });\n\n    $('#streetscapes').click(function() {\n         $('#city_selector').val('');\n           $('#country_selector').val('');\n           $('#status_selector').val('');\n           $('#size_selector').val('');\n           $('#tags_selector').val('');\n        currentPage = 1;\n        resetLayout();\n        url = \"api/data?category=streetscapes\";\n        currenturl = url;\n \n        $('#boucle').empty();\n        currentfilter = \"streetscapes\";\n        category = \"streetscapes\";\n        fetchAndRenderData(url);\n    });\n\n    $('#tags_selector').change(function() {\n       console.log('asda');\n       console.log($('#tags_selector').val());\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&tags=\" + $('#tags_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#tags_selector').val();\n        fetchAndRenderData(url);\n    });\n\n    $('#size_selector').change(function() {\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&size=\" + $('#size_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#size_selector').val();\n        fetchAndRenderData(url);\n    });\n\n    $('#status_selector').change(function() {\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&status=\" + $('#status_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#status_selector').val();\n        fetchAndRenderData(url);\n    });\n\n    $('#city_selector').change(function() {\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&city=\" + $('#city_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#city_selector').val();\n        fetchAndRenderData(url);\n    });\n\n    $('#country_selector').change(function() {\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&country=\" + $('#country_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#country_selector').val();\n        fetchAndRenderData(url);\n    });\n\n    $('#pop_selector').change(function() {\n        currentPage = 1;\n        currentcategory = category;\n        url = \"api/data?category=\" + currentcategory + \"&pop=\" + $('#pop_selector').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#pop_selector').val();\n        fetchAndRenderData(url);\n    });\n\n\n    $('#searchbar').keyup(function() {\n        currentPage = 1;\n        currentcategory = category;\n        resetLayout();\n        url = \"api/data?cat=\" + currentcategory + \"&q=\" + $('#searchbar').val();\n        currenturl = url;\n        $('#boucle').empty();\n        currentfilter = $('#searchbar').val();\n        fetchAndRenderData(url);\n    });\n\n\n    layout = null;\n\n    function resetLayout() {\n     \n        $(\".mygrid\").addClass(\"lg:grid-cols-4\").addClass(\"xl:grid-cols-5\").addClass(\"grid-cols-3\").addClass(\n                \"gap-5\").removeClass(\"lg:grid-cols-2\").removeClass(\"xl:grid-cols-3\").removeClass(\"grid-cols-2\")\n            .removeClass(\"grid-cols-1\").removeClass(\"lg:grid-cols-1\").removeClass(\"xl:grid-cols-1\");\n        layout = \"xl\";\n    \n    }\n\n\n\n    $(\"#change-layout\").click(function() {\n        view = \"grid\";\n        $(\"#themap\").remove();\n        fetchAndRenderData(url);\n        $(\".mygrid\").addClass(\"lg:grid-cols-4\").addClass(\"xl:grid-cols-5\").addClass(\"grid-cols-3\").addClass(\n                \"gap-5\").removeClass(\"lg:grid-cols-2\").removeClass(\"xl:grid-cols-3\").removeClass(\"grid-cols-2\")\n            .removeClass(\"grid-cols-1\").removeClass(\"lg:grid-cols-1\").removeClass(\"xl:grid-cols-1\");\n\n        layout = \"xl\";\n        console.log(layout);\n    });\n\n    $(\"#change-layout2\").click(function() {\n        $(\"#themap\").remove();\n        fetchAndRenderData(url);\n        $(\".mygrid\").removeClass(\"lg:grid-cols-4\").removeClass(\"xl:grid-cols-5\").removeClass(\"grid-cols-3\")\n            .removeClass(\"grid-cols-1\").removeClass(\"lg:grid-cols-1\").removeClass(\"xl:grid-cols-1\").addClass(\n                \"grid-cols-2\").addClass(\"lg:grid-cols-2\").addClass(\"xl:grid-cols-3\").addClass(\"gap-5\");\n\n        layout = \"medium\";\n        console.log(layout);\n    });\n\n\n\n    $(\".js-select2\").select2({\n           closeOnSelect : false,\n           placeholder : \"Click to select an option\",\n           allowHtml: true,\n           allowClear: true,\n           tags: true // ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ðµ Ð¾Ð¿Ñ†Ð¸Ð¸ Ð½Ð° Ð»ÐµÑ‚Ñƒ\n       });\n\n   $('.icons_select2').select2({\n       width: \"100%\",\n       templateSelection: iformat,\n       templateResult: iformat,\n       allowHtml: true,\n       placeholder: \"Click to select an option\",\n       dropdownParent: $( '.select-icon' ),//Ð¾Ð±Ð°Ð²Ð¸Ð»Ð¸ ÐºÐ»Ð°ÑÑ\n       allowClear: true,\n       multiple: false\n   });\n\n\n   function iformat(icon, badge,) {\n       var originalOption = icon.element;\n       var originalOptionBadge = $(originalOption).data('badge');\n    \n       return $('<span><i class=\"fa ' + $(originalOption).data('icon') + '\"></i> ' + icon.text + '<span class=\"badge\">' + originalOptionBadge + '</span></span>');\n   }\n\n\n\n    $(\"#change-layout3\").click(function() {\n        view = \"map\";\n        $(\"#boucle\").empty();\n        $(\".mygrid\").removeClass(\"lg:grid-cols-4\").removeClass(\"xl:grid-cols-5\").removeClass(\"grid-cols-3\")\n            .removeClass(\"grid-cols-2\").addClass(\"grid-cols-1\").addClass(\"lg:grid-cols-1\").addClass(\n                \"xl:grid-cols-1\").removeClass(\"gap-5\");\n        $(\"#boucle\").html(\n            \"<section id='themap' class='flex w-full pb-16 mx-auto border-b'><div id='map2' class='mx-2 mt-4 rounded h-[650px] w-screen'></div></section>\"\n        );\n\n\n        layout = \"map\";\n\n        fetch(url)\n            .then((resa) => resa.json())\n            .then((outa) => {\n                const obja = JSON.parse(JSON.stringify(outa));\n                let thedata = obja;\n\n                amarkers = {};\n\n                let mymap2 = L.map('map2').setView([48.6890, 11.14086], 2);\n                theosmLayer = L.tileLayer(\n                    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n                        maxZoom: 19,\n                        apikey: 'choisirgeoportail',\n                        format: 'image/jpeg',\n                        style: 'normal'\n                    }).addTo(mymap2);\n                mymap2.addLayer(theosmLayer);\n                mymap2.touchZoom.enable();\n                mymap2.scrollWheelZoom.disable();\n                var legend = L.control({\n                    position: \"topright\"\n                });\n                legend.onAdd = function(mymap2) {\n                    var div = L.DomUtil.create(\"div\", \"legend bg-gray-200 p-2 border rounded\");\n                    div.innerHTML +=\n                        '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Masterplans</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#4863DA] top-1/2\"></span></span><br>';\n                    div.innerHTML +=\n                        '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Streetscapes</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#D95649] top-1/2\"></span></span><br>';\n                    div.innerHTML +=\n                        '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Urbanscapes</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#63D74B] top-1/2\"></span></span><br>';\n                    return div;\n                };\n                legend.addTo(mymap2);\n                let counter = 0;\n                for (let i = 0; i < thedata.length; i++) {\n                    counter = counter + 1;\n                    mydata = thedata[i];\n                    mydatacat = mydata.category.toLowerCase();\n                    //mydatacat to lower case\n                    if (mydatacat == \"masterplans\") {\n                        mypics = mydata.image;\n                    } else {\n                        mypics = mydata.imagea;\n                    }\n                    category = mydata.category.toLowerCase();\n                    if (category == 'streetscapes') {\n                        cat = 1;\n                         icon = L.icon({\n               iconUrl: '/img/markers.png',\n               iconSize: [40, 40],\n               iconAnchor: [20, 40],\n               popupAnchor: [0, -40]\n           });\n                    } else if (category == 'masterplans') {\n                        cat = 2;\n                         icon = L.icon({\n               iconUrl: '/img/markerm.png',\n               iconSize: [40, 40],\n               iconAnchor: [20, 40],\n               popupAnchor: [0, -40]\n           });\n                    } else if (category == 'urbanscapes') {\n                        cat = 3;\n                                    icon = L.icon({\n               iconUrl: '/img/markeru.png',\n               iconSize: [40, 40],\n               iconAnchor: [20, 40],\n               popupAnchor: [0, -40]\n           });\n                    }\n\n                    mydataid = mydata.id;\n                    mydatacity = mydata.city;\n                    mydataname = mydata.title;\n                    mydataposition = mydata.location;\n                    var decimalStringa = [0, 0];\n                    if (mydataposition != null) {\n                        decimalStringa = mydataposition.split(',');\n                    }\n                    decimalStringa[0] = parseFloat(decimalStringa[0]).toFixed(6);\n                    decimalStringa[1] = parseFloat(decimalStringa[1]).toFixed(6);\n\n                    markera = L.marker([decimalStringa[0], decimalStringa[1]], { icon: icon}).addTo(mymap2).bindPopup(\n                        '<div class=\"relative flex flex-col mappopup\"><img onclick=\"myfunction(' +\n                        mydataid + ',' + cat +\n                        ')\" class=\"mt-4\" src=\"/storage/uploads/' + mydatacat + '/' + mypics +\n                        '\" /><div class=\"flex justify-between\"><h1 class=\"mt-1 mb-2 font-bold clamp\" id=\"mydatanom\">' +\n                        mydataname +\n                        '</h1><h1 class=\"pb-4 mt-1 mb-2 text-xs text-gray-500\" id=\"mydatacity\">' +\n                        mydatacity + '</h1></div></div>'\n                    );\n                    amarkers[mydata.id] = markera;\n                }\n\n            })\n\n    });\n</script>\n<style>\n    .clamp {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n\n    }\n   .select2-container--default .select2-selection--multiple .select2-selection__choice {\n       border: none;\n       background: rgba(0, 0, 0, 0.1);\n       font-size: 15px;\n       padding: 2px 10px;\n       color: gray;\n   }\n   .select2-container--default .select2-selection--multiple{\n       padding: 5px 1rem;\n       border: 1px solid #e5e7eb;\n       border-radius: 0.375rem;\n   }\n   .select2-container--default.select2-container--focus .select2-selection--multiple{\n       border:none;\n       --tw-ring-opacity: 1;\n   --tw-ring-color: rgb(156 163 175 / var(--tw-ring-opacity));\n   --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n   --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);\n   box-shadow: var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);\n   }\n   .select2-container--default.select2-container--focus .select2-selection--multiple:focus{\n       --tw-ring-opacity: 1;\n       --tw-ring-color: rgb(156 163 175 / var(--tw-ring-opacity));\n       --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n   --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);\n   box-shadow: var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);\n   }\n   .select2-results__option[aria-selected=true]:before {\n   font-family: 'fontAwesome';\n   content: \"\\f00c\";\n   color: #fff;\n   background-color: #0a0a0a;\n   border: 0;\n   display: inline-block;\n   padding: 0;\n   line-height: 1.2;\n   padding-left: 2px;\n}\n.select2-results__option:before {\n   content: \"\";\n   display: inline-block;\n   position: relative;\n   height: 20px;\n   width: 20px;\n   border: 2px solid rgba(0, 0, 0, 0.2);\n   border-radius: 4px;\n   background-color: transparent;\n   margin-right: 15px;\n   margin-left: 10px;\n   vertical-align: middle;\n}.select2-container--open .select2-dropdown--below {\n   padding: 10px 0;\n   border-radius: 4px;\n   border: none;\n   -webkit-box-shadow: 0px 3px 22px -15px rgba(0, 0, 0, 0.63);\n   -moz-box-shadow: 0px 3px 22px -15px rgba(0, 0, 0, 0.63);\n   box-shadow: 0px 3px 22px -15px rgba(0, 0, 0, 0.63);\n}.select2-results__option {\n   padding-right: 20px;\n   vertical-align: middle;\n}\n.select2-container--default .select2-results__option--highlighted[aria-selected] {\n   background-color: #fff;\n   color: #000;\n}\n.select2-container--default .select2-results__option[aria-selected=true] {\n   background-color: transparent;\n   color: #000;\n}\n.select2-results__option[aria-selected] {\n   color: #616161;\n}\n.select2-container--default .select2-selection--multiple .select2-selection__clear {\n   color: red;\n}\n</style>\n"
        }
    ]
}