{
    "sourceFile": "resources/views/parts/content.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1683377285963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1683379906535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -183,5 +183,5 @@\n     -webkit-box-orient: vertical;\n     overflow: hidden;\n \n }\n-</style>\n\\ No newline at end of file\n+</style>\n"
                }
            ],
            "date": 1683377285963,
            "name": "Commit-0",
            "content": "<div class=\"border-b border-gray-300\"></div>\n\n@include('parts.home')\n@include('parts.streetscapes')\n@include('parts.masterplans')\n@include('parts.neighbourhoods')\n\n<section class=\"pb-16 mx-4 mb-16 border-b md:mx-16\">\n    <div class=\"w-full\">\n        <h1 class=\"pt-16 pb-16 text-3xl font-bold text-center text-gray-900 select-none md:text-5xl\">Search on the map</h1>\n    </div>\n    <div class=\"flex md:mx-4\">\n        <div id=\"map\" class=\"mx-2 mt-4 rounded h-[650px] w-screen\">\n        </div>\n    </div>\n</section>\n\n\n@include('parts.dictionary')\n@include('parts.webresources')\n\n@include('parts.toread')\n@include('parts.instagram')\n\n\n<script>\n    data = {!! json_encode($all_data) !!};\n    markers = {};\n\n    let mymap = L.map('map').setView([38.6890, 11.14086], 2);\n    osmLayer = L.tileLayer(\n        'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n            maxZoom: 19,\n            apikey: 'choisirgeoportail',\n            format: 'image/jpeg',\n            style: 'normal'\n        }).addTo(mymap);\n    mymap.addLayer(osmLayer);\n    mymap.touchZoom.enable();\n    mymap.scrollWheelZoom.disable();\n    var legend = L.control({ position: \"topright\" });\n    legend.onAdd = function(mymap) {\n  var div = L.DomUtil.create(\"div\", \"legend bg-gray-200 p-2 border rounded\");\n  div.innerHTML += '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Masterplans</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#4863DA] top-1/2\"></span></span><br>';\n  div.innerHTML += '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Streetscapes</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#D95649] top-1/2\"></span></span><br>';\n  div.innerHTML += '<span class=\"relative\"><span class=\"inline-block ml-6 font-bold\">Urbanscapes</span><span class=\"absolute left-0 block w-4 h-4 transform -translate-y-1/2 bg-[#63D74B] top-1/2\"></span></span><br>';\n  div.innerHTML += '<label class=\"block pt-2\">Layer:</label><select name=\"Layer\"class=\"h-4 px-2 mt-1 text-xs font-bold rounded focus:outline-none\"id=\"selectfilter\" onchange=\"layer(this.value)\"><option id=\"optionx\" value=\"1\">OpenStreetMap</option><option id=\"optionx\" value=\"2\" selected>ArcGIS</option><option id=\"optionx\" value=\"3\">GeoPortail</option><option id=\"optionx\" value=\"4\">OpenTopoMap</option><option id=\"optionx\" value=\"5\">CyclOSM</option></select>'\n    return div;\n    };\n    legend.addTo(mymap);\n    let count = 0;\n    for (let i = 0; i < data.length; i++) {\n        count = count + 1;\n        graff = data[i];\n        pics = graff.imagea;\n        graffid = graff.id;\n         mydataca = graff.category.toLowerCase();\n          if (mydataca == \"masterplans\") {\n                         pics = graff.image;\n                     } else {\n                         pics = graff.imagea;\n                     }\n        category = graff.category.toLowerCase();\n        if (category == 'streetscapes') {\n            cat = 1;\n            icon = L.icon({\n                iconUrl: '/img/markers.png',\n                iconSize: [40, 40],\n                iconAnchor: [20, 40],\n                popupAnchor: [0, -40]\n            });\n        } else if (category == 'masterplans') {\n            cat = 2;\n             icon = L.icon({\n                iconUrl: '/img/markerm.png',\n                iconSize: [40, 40],\n                iconAnchor: [20, 40],\n                popupAnchor: [0, -40]\n            });\n        } else if (category == 'urbanscapes') {\n            cat = 3;\n             icon = L.icon({\n                iconUrl: '/img/markeru.png',\n                iconSize: [40, 40],\n                iconAnchor: [20, 40],\n                popupAnchor: [0, -40]\n            });\n        }\n        graffcity = graff.city;\n        graffname = graff.title;\n        graffposition = graff.location;\n        var decimalString = [0, 0];\n        if (graffposition != null) {\n            decimalString = graffposition.split(',');\n        }\n        decimalString[0] = parseFloat(decimalString[0]).toFixed(6);\n        decimalString[1] = parseFloat(decimalString[1]).toFixed(6);\n\n        marker = L.marker([decimalString[0], decimalString[1]], { icon: icon }).addTo(mymap).bindPopup(\n            '<div class=\"relative flex flex-col mappopup\"><img onclick=\"myfunction(' + graffid + ',' + cat +\n            ')\" class=\"mt-4\" loading=\"lazy\" src=\"/storage/uploads/thumbnails/' + mydataca + '/' + pics +\n            '\" onerror=\"/img/empty.png\"/><div class=\"flex justify-between\"><h1 class=\"mt-1 mb-2 font-bold clamp\" id=\"graffnom\">' + graffname +\n            '</h1><h1 class=\"pb-4 mt-1 mb-2 text-xs text-gray-500\" id=\"graffcity\">' + graffcity + '</h1></div></div>'\n        );\n        markers[graff.id] = marker;\n\n    }\n\n    function myfunction(id, cat) {\n\n\n        markers[id].closePopup();\n        if (cat == 1) {\n            categ = \"streetscapes\";\n        } else if (cat == 2) {\n            categ = \"masterplans\";\n        } else if (cat == 3) {\n            categ = \"urbanscapes\";\n        }\n\n        let pageName = categ + \"_post?id=\" + id;\n        //open link\n        window.open(pageName, \"_self\");\n\n    }\n\n    layout = null;\n\n\n        function layer(mylayer) {\n        if (mylayer == 1) {\n            mymap.removeLayer(osmLayer);\n            osmLayer = new L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19}).addTo(mymap);\n            mymap.addLayer(osmLayer);\n            maplayer = 2;\n            maxzoom = 19;\n        } else if (mylayer == 2) {\n            mymap.removeLayer(osmLayer);\n            osmLayer = new L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 19}).addTo(mymap);\n            mymap.addLayer(osmLayer);\n            maplayer = 1;\n            maxzoom = 19;\n        } else if (mylayer == 3) {\n            mymap.removeLayer(osmLayer);\n            osmLayer = L.tileLayer('https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER=ORTHOIMAGERY.ORTHOPHOTOS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}', {maxZoom: 19,apikey: 'choisirgeoportail',format: 'image/jpeg',style: 'normal'}).addTo(mymap);\n            mymap.addLayer(osmLayer);\n            maplayer = 3;\n            maxzoom = 19;\n        } else if (mylayer == 4) {\n            mymap.removeLayer(osmLayer);\n            osmLayer = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {maxZoom: 16,}).addTo(mymap);\n            mymap.addLayer(osmLayer);\n            maplayer = 4;\n            maxzoom = 16;\n        } else if (mylayer == 5) {\n            mymap.removeLayer(osmLayer);\n            osmLayer = L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {maxZoom: 20,}).addTo(mymap);\n            mymap.addLayer(osmLayer);\n            maplayer = 5;\n            maxzoom = 20;\n        }\n    }\n</script>\n<style>\n    .mappopup {\n        width: 200px;\n        height: 265px;\n    }\n\n    .mappopup img {\n        width: 100%;\n        height: 80%;\n        object-fit: cover;\n    }\n\n    .mappopup h1 {\n        cursor: pointer;\n    }\n\n.clamp {\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n\n}\n</style>"
        }
    ]
}